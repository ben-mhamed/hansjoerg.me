---
title: Font Embedding for LaTeX and R users
author: Hansjörg
date: '2018-01-30'
slug: font-encoding-for-latex-and-r-users
draft: true
categories: []
tags: [R, LaTeX, pdf, note-to-myself]
---



<div id="motivation" class="section level2">
<h2>Motivation</h2>
<p>Recently, I sent my disseratation as a PDF file to a copy shop and got an email back that I had not embedded all fonts and that they won’t print it for me. What? So instead of celebrating the submission, I had to search online for <code>pdf latex &quot;font embedding&quot;</code>, and this blog post is a summary of that afternoon.</p>
</div>
<div id="embedding-fonts-in-pdfs" class="section level2">
<h2>Embedding Fonts in PDFs</h2>
<p>Embedding fonts is probably not cruciual for non-exotic fonts on non-exotic devices/printers. However, if you wish that your PDF is correctly displayed or printed on any possible device, fonts should be embedded. Such devices could be, for example, a printer of a copy shop, an exotic PDF reader of a student, or a person with an otherwise different setup (e.g., someone in the year 2076 or someone in Tanzania).</p>
</div>
<div id="why" class="section level2">
<h2>Why</h2>
<p>In order to use (i.e., display or print) a PDF, the system has to know which fonts it should use.</p>
<ul>
<li>If the font used in the PDF is available on the system, it is able to handle it correctly (e.g., Arial).</li>
<li>If the font used in the PDF is not available on the system but is embedded in the PDF, the system is able to handle it correctly.</li>
<li>If the font is not available and not embedded, the system will guess what font to use for display/print and this may or may not work. This <a href="http://wiki.opf-labs.org/download/attachments/101613571/fonts_notembedded.jpg?version=1&amp;modificationDate=1430223649000">link</a> shows an extreme example of what might happen.</li>
</ul>
<p>Thus, one should always embed fonts. This will ensure that the PDF will be correctly displayed/printed on any device at any time.</p>
</div>
<div id="problem-r-does-not-embed-fonts" class="section level2">
<h2>Problem: R does not embed fonts</h2>
<p>R does not embed fonts when producing a PDF via <code>pdf()</code>. Thus, if you compile a PDF with LaTeX and include R plots (i.e., PDFs), LaTeX cannot embed the fonts of the plots, and then you finally have a PDF with some fonts not embedded. LaTeX itself seems to embed all fonts automatically, so if you don’t include any plots, you don’t have to worry.</p>
<p>You can check whether fonts are embedded with any PDF reader and something along the lines of Properties -&gt; Fonts.</p>
</div>
<div id="solution-in-r-use-cairo_pdf" class="section level2">
<h2>Solution in R: Use <code>cairo_pdf()</code></h2>
<ul>
<li>Do not produce vector graphics via <code>pdf()</code> but images via, for example, <code>png()</code>. This is probably not the desired solution because of quality, but it should work.</li>
<li>Produce vector graphics not via <code>pdf()</code> but via <code>cairo_pdf()</code>. This will embed the fonts automatically, and LaTeX will subsequently embed these fonts, too.</li>
<li>Producing some sort of postscript, EPS, or whatever (I dont’t have a clue), will probably work as well.</li>
<li>You may also embed fonts post hoc using the R package <strong>extrafont</strong> and its functionality of embedding fonts, e.g., <code>extrafont::embed_fonts(&quot;f1.pdf&quot;, outfile=&quot;f1_embed.pdf&quot;)</code>.<br />
BTW: You may use any font (available on your system) in any R plot with the <strong>extrafont</strong> package. This allows, for example, to use standard LaTeX font Computer Modern in R plots (looks ugly, of course).</li>
</ul>
</div>
<div id="solution-with-finished-pdf" class="section level2">
<h2>Solution With Finished PDF</h2>
<p>If you already have a PDF with unembedded fonts and want to embed the fonts post hoc, things are different and may be a bit more difficult. What worked for me in a one or two test cases are the following solutions.</p>
<ul>
<li>Use the <strong>extrafont</strong> R package and its function <code>embed_fonts()</code> as stated above.</li>
<li>Use ghostscript as described in the following blog post, close to the end of the post. What worked for me is the following command in a Windows Command Prompt</li>
</ul>
<pre class="r"><code>gswin64c -dNOPAUSE -dBATCH -sDEVICE=pdfwrite -dPDFSETTINGS=/prepress -dEmbedAllFonts=true -sOutputFile=C:\...\my_plot_embedded.pdf -f C:\...\my_plot.pdf</code></pre>
<p>These solutions are certainly dependent on the fact that you have the fonts, which you want to embed, installed on your computer.</p>
</div>
